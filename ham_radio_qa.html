<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ham Radio Q&A</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { background-color: #1c2526; color: #ffffff; font-size: 16px; font-family: Arial, sans-serif; }
        input, button { font-size: 16px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #4c5c5d; padding: 8px; text-align: left; }
        th { background-color: #3b4b4c; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="p-4">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold mb-4">Ham Radio Q&A</h1>
        <div class="mb-4">
            <label for="question" class="block text-lg mb-2">Ask a Ham Radio Question:</label>
            <input id="question" type="text" class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded" placeholder="e.g., What are Q codes?">
        </div>
        <div class="flex flex-wrap gap-2 mb-4">
            <button onclick="search()" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Search</button>
            <button onclick="speak()" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Speak</button>
            <button onclick="copyText()" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Copy Text</button>
            <button onclick="saveAsPDF()" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Save as PDF</button>
        </div>
        <div id="results" class="mb-4">
            <table id="resultsTable" class="hidden">
                <thead>
                    <tr><th>Field</th><th>Content</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="mb-4">
            <h2 class="text-lg font-bold">Saved Answers</h2>
            <div class="flex flex-wrap gap-2 mb-2">
                <button onclick="showTab('General Knowledge')" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">General</button>
                <button onclick="showTab('Antennas')" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Antennas</button>
                <button onclick="showTab('Equipment')" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Equipment</button>
                <button onclick="showTab('Regulations')" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Regulations</button>
                <button onclick="showTab('Operating Practices')" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Operating</button>
                <button onclick="showTab('Electronics')" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Electronics</button>
                <button onclick="showTab('Propagation')" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Propagation</button>
                <button onclick="showTab('Other')" class="bg-gray-600 hover:bg-gray-500 text-white p-2 rounded">Other</button>
            </div>
            <div id="tabs">
                <div id="General Knowledge" class="tab-content">
                    <input type="text" oninput="filterTab('General Knowledge', this.value)" class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded mb-2" placeholder="Search...">
                    <table id="General KnowledgeTable"><thead><tr><th>Question</th><th>Answers</th></tr></thead><tbody></tbody></table>
                </div>
                <div id="Antennas" class="tab-content">
                    <input type="text" oninput="filterTab('Antennas', this.value)" class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded mb-2" placeholder="Search...">
                    <table id="AntennasTable"><thead><tr><th>Question</th><th>Answers</th></tr></thead><tbody></tbody></table>
                </div>
                <div id="Equipment" class="tab-content">
                    <input type="text" oninput="filterTab('Equipment', this.value)" class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded mb-2" placeholder="Search...">
                    <table id="EquipmentTable"><thead><tr><th>Question</th><th>Answers</th></tr></thead><tbody></tbody></table>
                </div>
                <div id="Regulations" class="tab-content">
                    <input type="text" oninput="filterTab('Regulations', this.value)" class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded mb-2" placeholder="Search...">
                    <table id="RegulationsTable"><thead><tr><th>Question</th><th>Answers</th></tr></thead><tbody></tbody></table>
                </div>
                <div id="Operating Practices" class="tab-content">
                    <input type="text" oninput="filterTab('Operating Practices', this.value)" class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded mb-2" placeholder="Search...">
                    <table id="Operating PracticesTable"><thead><tr><th>Question</th><th>Answers</th></tr></thead><tbody></tbody></table>
                </div>
                <div id="Electronics" class="tab-content">
                    <input type="text" oninput="filterTab('Electronics', this.value)" class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded mb-2" placeholder="Search...">
                    <table id="ElectronicsTable"><thead><tr><th>Question</th><th>Answers</th></tr></thead><tbody></tbody></table>
                </div>
                <div id="Propagation" class="tab-content">
                    <input type="text" oninput="filterTab('Propagation', this.value)" class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded mb-2" placeholder="Search...">
                    <table id="PropagationTable"><thead><tr><th>Question</th><th>Answers</th></tr></thead><tbody></tbody></table>
                </div>
                <div id="Other" class="tab-content">
                    <input type="text" oninput="filterTab('Other', this.value)" class="w-full p-2 bg-gray-700 text-white border border-gray-600 rounded mb-2" placeholder="Search...">
                    <table id="OtherTable"><thead><tr><th>Question</th><th>Answers</th></tr></thead><tbody></tbody></table>
                </div>
            </div>
        </div>
    </div>
    <script>
        const CATEGORIES = ["General Knowledge", "Antennas", "Equipment", "Regulations", "Operating Practices", "Electronics", "Propagation", "Other"];
        let currentResult = null;

        // Mock dataset for Ham Radio questions (curated from public sources)
        const mockData = [
            {
                question: "What are the Q codes for hello and goodbye?",
                answers: ["QSL is used to acknowledge or say hello, 73 is used for goodbye."],
                category: "Operating Practices"
            },
            {
                question: "What is a dipole antenna?",
                answers: ["A dipole antenna is a simple antenna with two conductive elements, often used for HF bands."],
                category: "Antennas"
            },
            {
                question: "What is a Yagi antenna?",
                answers: ["A Yagi antenna is a directional antenna with multiple elements, used for long-distance communication."],
                category: "Antennas"
            },
            {
                question: "What is the FCC role in Ham Radio?",
                answers: ["The FCC regulates amateur radio in the USA, issuing licenses and enforcing rules."],
                category: "Regulations"
            },
            {
                question: "What is a transceiver?",
                answers: ["A transceiver combines a transmitter and receiver in one unit, used for two-way communication."],
                category: "Equipment"
            },
            {
                question: "What is ionospheric propagation?",
                answers: ["Ionospheric propagation involves radio waves reflecting off the ionosphere, enabling long-distance communication."],
                category: "Propagation"
            },
            {
                question: "What is a capacitor in Ham Radio?",
                answers: ["A capacitor stores electrical energy and is used in circuits for filtering or tuning."],
                category: "Electronics"
            },
            {
                question: "What is Ham Radio?",
                answers: ["Ham Radio is a hobby where licensed amateurs use radio equipment for non-commercial communication."],
                category: "General Knowledge"
            },
            {
                question: "What is a CQ call?",
                answers: ["A CQ call is a general call to any station, inviting a response for a QSO."],
                category: "Operating Practices"
            },
            {
                question: "What are amateur radio bands?",
                answers: ["Amateur radio bands are frequency ranges allocated for Ham Radio use, such as 80m, 40m, and 20m."],
                category: "General Knowledge"
            }
        ];

        // Load saved data
        function loadData() {
            const data = localStorage.getItem("hamRadioData");
            return data ? JSON.parse(data) : CATEGORIES.reduce((acc, cat) => ({ ...acc, [cat]: [] }), {});
        }

        // Save data
        function saveData(data) {
            localStorage.setItem("hamRadioData", JSON.stringify(data));
        }

        // Categorize question
        function categorizeAnswer(question) {
            question = question.toLowerCase();
            if (/antenna|dipole|yagi/.test(question)) return "Antennas";
            if (/radio|transceiver|rig/.test(question)) return "Equipment";
            if (/license|fcc|regulation/.test(question)) return "Regulations";
            if (/cq|qso|dx|q code/.test(question)) return "Operating Practices";
            if (/circuit|resistor|capacitor/.test(question)) return "Electronics";
            if (/propagation|ionosphere|band/.test(question)) return "Propagation";
            if (/what is|history|basic/.test(question)) return "General Knowledge";
            return "Other";
        }

        // Search function
        function search() {
            const question = document.getElementById("question").value.trim();
            if (!question) {
                alert("Please enter a question.");
                return;
            }

            const category = categorizeAnswer(question);
            let answers = [];

            // Check mock dataset
            const match = mockData.find(item => item.question.toLowerCase().includes(question.toLowerCase()));
            if (match) {
                answers = match.answers;
            } else {
                // Generic fallback
                answers = [`Sample answer for "${question}" based on Ham Radio knowledge.`];
            }

            currentResult = { question, answers, category };

            // Display results
            const table = document.getElementById("resultsTable");
            table.classList.remove("hidden");
            const tbody = table.querySelector("tbody");
            tbody.innerHTML = `
                <tr><td>Category</td><td>${category}</td></tr>
                <tr><td>Question</td><td>${question}</td></tr>
                ${answers.map((ans, i) => `<tr><td>Answer ${i + 1}</td><td>${ans}</td></tr>`).join("")}
            `;

            // Save to storage
            const data = loadData();
            data[category].push({ question, answers });
            saveData(data);
            updateTab(category);
            document.getElementById("question").value = "";
        }

        // Speak results
        function speak() {
            if (!currentResult) {
                alert("No answer to read.");
                return;
            }
            const { question, answers, category } = currentResult;
            const text = `Category: ${category}. Question: ${question}. ${answers.map((ans, i) => `Answer ${i + 1}: ${ans}`).join(". ")}`;
            const utterance = new SpeechSynthesisUtterance(text);
            window.speechSynthesis.speak(utterance);
        }

        // Copy text
        function copyText() {
            if (!currentResult) {
                alert("No answer to copy.");
                return;
            }
            const { question, answers, category } = currentResult;
            const text = `Category: ${category}\nQuestion: ${question}\n${answers.map((ans, i) => `Answer ${i + 1}: ${ans}`).join("\n")}`;
            navigator.clipboard.writeText(text).then(() => alert("Text copied to clipboard."));
        }

        // Save as PDF
        function saveAsPDF() {
            if (!currentResult) {
                alert("No answer to save.");
                return;
            }
            const { question, answers, category } = currentResult;
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFontSize(12);
            doc.text("Ham Radio Q&A", 10, 10);
            let y = 20;
            doc.text(`Category: ${category}`, 10, y);
            y += 10;
            doc.text(`Question: ${question}`, 10, y);
            y += 10;
            answers.forEach((ans, i) => {
                doc.text(`Answer ${i + 1}: ${ans}`, 10, y);
                y += 10;
            });
            doc.save("ham_radio_output.pdf");
        }

        // Show tab
        function showTab(category) {
            document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove("active"));
            document.getElementById(category).classList.add("active");
            updateTab(category);
        }

        // Update tab table
        function updateTab(category) {
            const data = loadData();
            const table = document.getElementById(`${category}Table`);
            const tbody = table.querySelector("tbody");
            tbody.innerHTML = data[category].map(entry => `
                <tr><td>${entry.question}</td><td>${entry.answers.join("; ")}</td></tr>
            `).join("");
        }

        // Filter tab
        function filterTab(category, searchTerm) {
            const data = loadData();
            const table = document.getElementById(`${category}Table`);
            const tbody = table.querySelector("tbody");
            searchTerm = searchTerm.toLowerCase();
            tbody.innerHTML = data[category].filter(entry =>
                entry.question.toLowerCase().includes(searchTerm) ||
                entry.answers.some(ans => ans.toLowerCase().includes(searchTerm))
            ).map(entry => `
                <tr><td>${entry.question}</td><td>${entry.answers.join("; ")}</td></tr>
            `).join("");
        }

        // Initialize
        CATEGORIES.forEach(category => updateTab(category));
        showTab("General Knowledge");
    </script>
</body>
</html>